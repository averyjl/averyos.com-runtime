[
  {
    "description": "Redirect www to root domain",
    "action": "redirect",
    "expression": "http.request.full_uri wildcard \"https://www.averyos.com/*\"",
    "enabled": true,
    "action_parameters": {
      "from_value": {
        "status_code": 301,
        "target_url": {
          "expression": "wildcard_replace(http.request.full_uri, \"https://www.averyos.com/*\", \"https://averyos.com/${1}\")"
        },
        "preserve_query_string": true
      }
    }
  },
  {
    "description": "Redirect HTTP to HTTPS",
    "action": "redirect",
    "expression": "not ssl",
    "enabled": true,
    "action_parameters": {
      "from_value": {
        "status_code": 301,
        "target_url": {
          "expression": "concat(\"https://\", http.request.host, http.request.uri)"
        },
        "preserve_query_string": false
      }
    }
  }
]