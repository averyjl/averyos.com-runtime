name: Sovereign Manual Truth Sync
permissions:
  contents: read

on:
  workflow_dispatch:
    inputs:
      action:
        description: 'Action to perform (truth-sync, tari-pulse)'
        default: 'truth-sync'
        required: true
        type: string

jobs:
  Sovereign-Action:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Acknowledge Root0 Anchor
        run: echo "Verifying SHA: cf83e135...e3be | Status: FullStack Jason Locked"

      - name: Execute Sovereign Logic
        run: |
          ACTION="${{ github.event.inputs.action }}"
          echo "Executing sovereign action: $ACTION"
          if [ "$ACTION" = "tari-pulse" ]; then
            node ./scripts/generateEvidenceBundle.js
          else
            echo "âœ… Truth-Sync: Sovereign state acknowledged"
            echo "Commit: ${{ github.sha }}"
            echo "Branch: ${{ github.ref_name }}"
            echo "Timestamp: $(date -u)"
          fi
